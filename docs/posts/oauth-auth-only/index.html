<!doctype html><html lang=en><head><title>OAuth Auth Only · Shallow Brook Software
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Andrew Dailey"><meta name=description content="I recently made a decision around how Bloggulus handles authentication.
In short, it now only supports signing in with OAuth (via GitHub or Google).
Users can no longer sign up with an arbitrary username and password.
Is this a terrible idea or big brain play?
I think the jury is still out but, personally, I&rsquo;m feeling pretty good about it!
This approach, like everything in software development, comes with tradeoffs."><meta name=keywords content="blog,developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary"><meta name=twitter:title content="OAuth Auth Only"><meta name=twitter:description content="I recently made a decision around how Bloggulus handles authentication. In short, it now only supports signing in with OAuth (via GitHub or Google). Users can no longer sign up with an arbitrary username and password. Is this a terrible idea or big brain play? I think the jury is still out but, personally, I’m feeling pretty good about it! This approach, like everything in software development, comes with tradeoffs."><meta property="og:url" content="https://shallowbrooksoftware.com/posts/oauth-auth-only/"><meta property="og:site_name" content="Shallow Brook Software"><meta property="og:title" content="OAuth Auth Only"><meta property="og:description" content="I recently made a decision around how Bloggulus handles authentication. In short, it now only supports signing in with OAuth (via GitHub or Google). Users can no longer sign up with an arbitrary username and password. Is this a terrible idea or big brain play? I think the jury is still out but, personally, I’m feeling pretty good about it! This approach, like everything in software development, comes with tradeoffs."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-27T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-27T00:00:00+00:00"><link rel=canonical href=https://shallowbrooksoftware.com/posts/oauth-auth-only/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.e927f7340e309d76dcb8fda85f1531ae7341aa9cd0b7f3ab77885dae77b1a0a2.css integrity="sha256-6Sf3NA4wnXbcuP2oXxUxrnNBqpzQt/Ord4hdrnexoKI=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://shallowbrooksoftware.com/>Shallow Brook Software
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://shallowbrooksoftware.com/posts/oauth-auth-only/>OAuth Auth Only</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2024-10-27T00:00:00Z>October 27, 2024
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div></div></header><div class=post-content><p>I recently made a decision around how Bloggulus handles authentication.
In short, it now only supports signing in with OAuth (via GitHub or Google).
Users can no longer sign up with an arbitrary username and password.
Is this a terrible idea or big brain play?
I think the jury is still out but, personally, I&rsquo;m feeling pretty good about it!
This approach, like everything in software development, comes with tradeoffs.</p><p><img src=/images/20241027/auth.webp alt="Sign in options with OAuth services"></p><h2 id=tradeoffs>Tradeoffs
<a class=heading-link href=#tradeoffs><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Let&rsquo;s start with some of the benefits:</p><ul><li>Users don&rsquo;t have to worry about another password.</li><li>Getting started with the app is much simpler: just a couple clicks.</li><li>Bloggulus is not responsible for storing any sensitive user data.</li><li>Password resets are no longer an issue (don&rsquo;t need to send any reset emails).</li></ul><p>How about downsides?
I can&rsquo;t think of many but there is at least one:</p><ul><li>Users without a GitHub or Google account can&rsquo;t use the app</li></ul><p>I&rsquo;m unsure how big of a downside this is, though.
I don&rsquo;t personally know anyone who doesn&rsquo;t have either a GitHub (friends) or Google (family) account.
Plus, this approach is somewhat future proof because support for other OAuth services can always be added down the line.</p><h2 id=data-privacy>Data Privacy
<a class=heading-link href=#data-privacy><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The only data I store is a <a href=https://en.wikipedia.org/wiki/Message_authentication_code class=external-link target=_blank rel=noopener>message address code</a> of the OAuth service&rsquo;s unique ID for the authenticated user.
The process looks like this:</p><ol><li>The OAuth services gives me a unique user identifier (which is public information)</li><li>Bloggulus appends the service name to the ID to make it unique across all OAuth services</li><li>The user ID is passed through an HMAC-SHA256 function alongside an application secret key</li><li>The resulting hash is stored in the database and can be used to deterministically identify users</li></ol><p>I really appreciate the &ldquo;information security&rdquo; posture of this approach.
I think it offers great respect for users and protects their data.
In the event of a database leak (due to SQL injection or something like that), the attacker would not have enough information to brute force the hashes.
Even if they started from a list of known, public OAuth service IDs, they wouldn&rsquo;t be able to arrive at the same hash without also having the application secret key.</p><p>Now, let&rsquo;s say the attacker gets ahold of both the database <em>and</em> the secret key.
Even in this absolute catastrophe of a scenario, the only information the attacker could obtain are the users&rsquo; service IDs.
While this <em>does</em> constitute personally-identifiable information (PII), it isn&rsquo;t sensitive and poses no risk to each user&rsquo;s upstream OAuth account.</p><h2 id=local-development>Local Development
<a class=heading-link href=#local-development><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Obviously, going OAuth only means that, by default, logging in locally requires setting up the config for at least one OAuth service.
This is somewhat inconvenient, especially because working on the auth system itself is pretty rare (compared to other things).
So how can we bridge this gap and avoid sacrificing developer experience?</p><p>I ended up implementing another, local-only debug authentication method.
It only shows when the app is run with the <code>ENABLE_DEBUG_AUTH</code> environment variable set.
The way it works is quite simple: generate a random user ID, create an account, then create a session.
This means that each debug login will result in a new account being created.
While this could be a downside, I find it to be a good balance!</p><p><img src=/images/20241027/debug.webp alt="Sign in options with local debug auth"></p><h2 id=conlusion>Conlusion
<a class=heading-link href=#conlusion><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Well reader, what do you think?
Is this an amazing idea that respects user privacy?
Or is this a selfish and inconvenient precedent to set: requiring users to have an account on either GitHub or Google?
I&rsquo;m still undecided but I ultimately think it&rsquo;s a good idea overall.
At the very least, I learned something about how to integrate Go-based web apps with OAuth services.
That alone is worth the trouble.</p><p>You know what they say: investing in yourself is one of the safest investments you can make!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2024
Andrew Dailey
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>