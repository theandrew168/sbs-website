<!doctype html><html lang=en><head><title>Wrapping Up Squeaky · Shallow Brook Software
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Andrew Dailey"><meta name=description content="My primary project for the last month or so has a been a proof of concept programming language called Squeaky. I&rsquo;ve had this idea in my head for a few years: build a functional language in C with a focus on game development. I wanted window creation, OpenGL graphics, and input events to all be first class citizens of the language and not optional libraries to be pulled in later. Cross-platform portability was important, too."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Wrapping Up Squeaky"><meta name=twitter:description content="My primary project for the last month or so has a been a proof of concept programming language called Squeaky. I&rsquo;ve had this idea in my head for a few years: build a functional language in C with a focus on game development. I wanted window creation, OpenGL graphics, and input events to all be first class citizens of the language and not optional libraries to be pulled in later. Cross-platform portability was important, too."><meta property="og:url" content="https://shallowbrooksoftware.com/posts/wrapping-up-squeaky/"><meta property="og:site_name" content="Shallow Brook Software"><meta property="og:title" content="Wrapping Up Squeaky"><meta property="og:description" content="My primary project for the last month or so has a been a proof of concept programming language called Squeaky. I&amp;rsquo;ve had this idea in my head for a few years: build a functional language in C with a focus on game development. I wanted window creation, OpenGL graphics, and input events to all be first class citizens of the language and not optional libraries to be pulled in later. Cross-platform portability was important, too."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-08-25T00:00:00+00:00"><meta property="article:tag" content="C"><meta property="article:tag" content="SDL2"><meta property="article:tag" content="Scheme"><link rel=canonical href=https://shallowbrooksoftware.com/posts/wrapping-up-squeaky/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.577e3c5ead537873430da16f0964b754a120fd87c4e2203a00686e7c75b51378.css integrity="sha256-V348Xq1TeHNDDaFvCWS3VKEg/YfE4iA6AGhufHW1E3g=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://shallowbrooksoftware.com/>Shallow Brook Software
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://shallowbrooksoftware.com/posts/wrapping-up-squeaky/>Wrapping Up Squeaky</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2020-08-25T00:00:00Z>August 25, 2020
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/c/>C</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/sdl2/>SDL2</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/scheme/>Scheme</a></span></div></div></header><div class=post-content><p>My primary project for the last month or so has a been a proof of concept programming language called <a href=https://github.com/theandrew168/squeaky class=external-link target=_blank rel=noopener>Squeaky</a>.
I&rsquo;ve had this idea in my head for a few years: build a functional language in C with a focus on game development.
I wanted window creation, OpenGL graphics, and input events to all be first class citizens of the language and not optional libraries to be pulled in later.
Cross-platform portability was important, too.
If you write a game that utilizes the language&rsquo;s builtin capabilities for graphics and keyboard input, it should work the same on all major platforms: Windows, macOS, and Linux.</p><p>The language currently shows that all of this is possible.
It may only be able to draw white lines on a black backgroud, but that proves that arbitrary graphics are possible.
It may only be able to handle left and right arrow keys, but that proves that arbitrary input is possible.
Given these facts, I am able to call the project a success even though it didn&rsquo;t meet my initial expectations.
There are some more advanced topics that I want to explore in smaller subprojects before returning to Squeaky.</p><h1 id=bumps-in-the-road>Bumps in the Road
<a class=heading-link href=#bumps-in-the-road><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>One of my biggest gripes with the language is that you need the interpreter to be present to run any code.
This is also how <a href=https://www.python.org/ class=external-link target=_blank rel=noopener>Python</a> works but Python&rsquo;s popularity and ecosystem offset that cost.
What I&rsquo;d really like is a language implementation that generates static binaries like <a href=https://golang.org/ class=external-link target=_blank rel=noopener>Go</a> does.
Thinking about this led me to a realization: if my language simply takes text as input and emits bytes as output, then the implementation language doesn&rsquo;t actually matter.
I could write the same language in Python just as much as I could write it in C.
But what about SDL2?!</p><p>The problem of linking in SDL2 functions is an interesting one that I plan to explore.
As long as I have the static libraries present during compilation, what prevents me from looking up the symbol and injecting its object code into the target binary myself?
This is super hand-wavey and complicated but I want to try it out.
I envision a Scheme compiler written in a friendly language (such as Python) that uses prebuilt static libraries as a sort of toolbox to be utilized during compilation.
A separate library for each platform can be held to enable cross-platform code generation.
If the program source wants to create a window, the compiler will reach into the target platform&rsquo;s <code>libSDL2.a</code> static library, find the <code>SDL_CreateWindow</code> symbol, and inline its code into the target binary.</p><h1 id=future-plans>Future Plans
<a class=heading-link href=#future-plans><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>I don&rsquo;t actually know if this is feasible or not but I&rsquo;m excited to find out!
If it does work, you can expect a more detailed write-up on the nuances and trade-offs for this approach to compiling foreign functions.
In the meantime, I have about 50 years of assembly basics to catch up on.
Wish me luck!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2024
Andrew Dailey
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>